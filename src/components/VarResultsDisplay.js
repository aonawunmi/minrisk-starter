import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
// src/components/VarResultsDisplay.tsx
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
export function VarResultsDisplay({ results, matrixSize }) {
    const formatCurrency = (value) => {
        return new Intl.NumberFormat('en-NG', {
            style: 'currency',
            currency: 'NGN',
            minimumFractionDigits: 0,
            maximumFractionDigits: 0
        }).format(value);
    };
    const formatPercent = (value) => {
        return `${(value * 100).toFixed(2)}%`;
    };
    const formatNumber = (value, decimals = 2) => {
        return value.toFixed(decimals);
    };
    // Get color for correlation
    const getCorrelationColor = (corr) => {
        if (corr > 0.7)
            return 'bg-red-100 text-red-800';
        if (corr > 0.3)
            return 'bg-orange-100 text-orange-800';
        if (corr > -0.3)
            return 'bg-gray-100 text-gray-800';
        if (corr > -0.7)
            return 'bg-blue-100 text-blue-800';
        return 'bg-green-100 text-green-800';
    };
    // Calculate diversification metrics
    const sumStandaloneVaR = results.asset_contributions.reduce((sum, a) => sum + a.standalone_var, 0);
    const totalDiversificationBenefit = sumStandaloneVaR - results.portfolio_var;
    const diversificationReductionPct = (totalDiversificationBenefit / sumStandaloneVaR) * 100;
    return (_jsxs("div", { className: "space-y-4", children: [_jsx(Card, { className: "rounded-2xl shadow-sm bg-gradient-to-r from-green-50 to-emerald-50 border-green-200", children: _jsx(CardContent, { className: "pt-6", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("p", { className: "text-sm font-medium text-gray-600 mb-1", children: "\uD83D\uDC8E Diversification Benefit" }), _jsxs("div", { className: "text-3xl font-bold text-green-700", children: [diversificationReductionPct.toFixed(1), "%"] }), _jsx("p", { className: "text-xs text-gray-600 mt-1", children: "VaR reduction from diversification" })] }), _jsxs("div", { className: "text-right", children: [_jsx("p", { className: "text-xs text-gray-600 mb-1", children: "Sum of Standalone VaRs" }), _jsx("p", { className: "text-lg font-semibold text-gray-700", children: formatCurrency(sumStandaloneVaR) }), _jsx("p", { className: "text-xs text-gray-600 mt-2", children: "Diversified Portfolio VaR" }), _jsx("p", { className: "text-lg font-semibold text-green-700", children: formatCurrency(results.portfolio_var) }), _jsxs("p", { className: "text-xs font-medium text-green-600 mt-1", children: ["Saved: ", formatCurrency(totalDiversificationBenefit)] })] })] }) }) }), _jsxs("div", { className: "grid grid-cols-4 gap-4", children: [_jsxs(Card, { children: [_jsx(CardHeader, { className: "pb-2", children: _jsx(CardTitle, { className: "text-sm font-medium text-gray-600", children: "Portfolio VaR" }) }), _jsxs(CardContent, { children: [_jsx("div", { className: "text-2xl font-bold", children: formatCurrency(results.portfolio_var) }), _jsxs("p", { className: "text-xs text-gray-500 mt-1", children: [results.confidence_level, "% confidence"] })] })] }), _jsxs(Card, { children: [_jsx(CardHeader, { className: "pb-2", children: _jsx(CardTitle, { className: "text-sm font-medium text-gray-600", children: "Portfolio Volatility" }) }), _jsxs(CardContent, { children: [_jsx("div", { className: "text-2xl font-bold", children: formatPercent(results.portfolio_volatility) }), _jsx("p", { className: "text-xs text-gray-500 mt-1", children: "Annualized" })] })] }), _jsxs(Card, { children: [_jsx(CardHeader, { className: "pb-2", children: _jsx(CardTitle, { className: "text-sm font-medium text-gray-600", children: "Total Portfolio Value" }) }), _jsxs(CardContent, { children: [_jsx("div", { className: "text-2xl font-bold", children: formatCurrency(results.total_portfolio_value) }), _jsx("p", { className: "text-xs text-gray-500 mt-1", children: "Market value" })] })] }), _jsxs(Card, { children: [_jsx(CardHeader, { className: "pb-2", children: _jsx(CardTitle, { className: "text-sm font-medium text-gray-600", children: "Data Points" }) }), _jsxs(CardContent, { children: [_jsx("div", { className: "text-2xl font-bold", children: results.data_points_count }), _jsx("p", { className: "text-xs text-gray-500 mt-1", children: "Historical observations" })] })] })] }), _jsxs(Card, { className: "rounded-2xl shadow-sm", children: [_jsx(CardHeader, { children: _jsx(CardTitle, { className: "text-lg", children: "\uD83C\uDFAF Risk Score Mapping" }) }), _jsxs(CardContent, { className: "space-y-4", children: [_jsxs("div", { children: [_jsxs("div", { className: "flex items-center justify-between mb-2", children: [_jsx("span", { className: "text-sm font-medium", children: "Likelihood Score:" }), _jsxs("span", { className: "text-lg font-bold", children: [results.likelihood_score, " / ", matrixSize] })] }), _jsx("div", { className: "w-full bg-gray-200 rounded-full h-2.5", children: _jsx("div", { className: "bg-blue-600 h-2.5 rounded-full", style: { width: `${(results.likelihood_score / matrixSize) * 100}%` } }) }), _jsxs("p", { className: "text-xs text-gray-600 mt-1", children: ["Based on portfolio volatility: ", formatPercent(results.portfolio_volatility)] })] }), _jsxs("div", { children: [_jsxs("div", { className: "flex items-center justify-between mb-2", children: [_jsx("span", { className: "text-sm font-medium", children: "Impact Score:" }), _jsxs("span", { className: "text-lg font-bold", children: [results.impact_score, " / ", matrixSize] })] }), _jsx("div", { className: "w-full bg-gray-200 rounded-full h-2.5", children: _jsx("div", { className: "bg-red-600 h-2.5 rounded-full", style: { width: `${(results.impact_score / matrixSize) * 100}%` } }) }), _jsxs("p", { className: "text-xs text-gray-600 mt-1", children: ["Based on portfolio value: ", formatCurrency(results.total_portfolio_value)] })] }), _jsx("div", { className: "mt-4 p-3 bg-gray-50 rounded-lg", children: _jsxs("p", { className: "text-sm font-medium", children: ["Overall Risk: ", ' ', _jsxs("span", { className: "text-lg font-bold", children: [results.likelihood_score, " \u00D7 ", results.impact_score, " = ", results.likelihood_score * results.impact_score] })] }) })] })] }), _jsxs(Card, { className: "rounded-2xl shadow-sm", children: [_jsxs(CardHeader, { children: [_jsx(CardTitle, { className: "text-lg", children: "\uD83D\uDCCA Asset Contribution to VaR" }), _jsx("p", { className: "text-xs text-gray-600 mt-1", children: "Standalone VaR shows risk if asset held in isolation. Diversification benefit = Standalone VaR - VaR Contribution" })] }), _jsx(CardContent, { children: _jsx("div", { className: "overflow-auto rounded-xl border", children: _jsxs("table", { className: "w-full text-sm", children: [_jsx("thead", { className: "bg-gray-100", children: _jsxs("tr", { children: [_jsx("th", { className: "px-3 py-2 text-left font-semibold text-gray-700", children: "Asset Name" }), _jsx("th", { className: "px-3 py-2 text-right font-semibold text-gray-700", children: "Market Value" }), _jsx("th", { className: "px-3 py-2 text-right font-semibold text-gray-700", children: "Weight" }), _jsx("th", { className: "px-3 py-2 text-right font-semibold text-gray-700", children: "Standalone VaR" }), _jsx("th", { className: "px-3 py-2 text-right font-semibold text-gray-700", children: "VaR Contribution" }), _jsx("th", { className: "px-3 py-2 text-right font-semibold text-gray-700", children: "Diversification Benefit" }), _jsx("th", { className: "px-3 py-2 text-right font-semibold text-gray-700", children: "% of Total VaR" })] }) }), _jsxs("tbody", { children: [results.asset_contributions.map((asset, index) => (_jsxs("tr", { className: "border-t", children: [_jsx("td", { className: "px-3 py-2", children: asset.asset_name }), _jsx("td", { className: "px-3 py-2 text-right", children: formatCurrency(asset.market_value) }), _jsx("td", { className: "px-3 py-2 text-right", children: formatPercent(asset.weight) }), _jsx("td", { className: "px-3 py-2 text-right text-gray-600", children: formatCurrency(asset.standalone_var) }), _jsx("td", { className: "px-3 py-2 text-right font-medium", children: formatCurrency(asset.var_contribution) }), _jsx("td", { className: "px-3 py-2 text-right", children: _jsxs("span", { className: `inline-flex items-center px-2 py-1 text-xs font-medium rounded ${asset.diversification_benefit > 0
                                                                ? 'bg-green-100 text-green-800'
                                                                : 'bg-red-100 text-red-800'}`, children: [asset.diversification_benefit >= 0 ? '+' : '', formatCurrency(asset.diversification_benefit)] }) }), _jsx("td", { className: "px-3 py-2 text-right", children: _jsxs("span", { className: "inline-flex items-center justify-center w-16 px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded", children: [formatNumber(asset.var_contribution_pct, 1), "%"] }) })] }, index))), _jsxs("tr", { className: "border-t-2 border-gray-300 bg-gray-50 font-semibold", children: [_jsx("td", { className: "px-3 py-2", children: "Total" }), _jsx("td", { className: "px-3 py-2 text-right", children: formatCurrency(results.total_portfolio_value) }), _jsx("td", { className: "px-3 py-2 text-right", children: "100.00%" }), _jsx("td", { className: "px-3 py-2 text-right text-gray-600", children: formatCurrency(results.asset_contributions.reduce((sum, a) => sum + a.standalone_var, 0)) }), _jsx("td", { className: "px-3 py-2 text-right", children: formatCurrency(results.portfolio_var) }), _jsx("td", { className: "px-3 py-2 text-right", children: _jsxs("span", { className: "inline-flex items-center px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded", children: ["+", formatCurrency(results.asset_contributions.reduce((sum, a) => sum + a.standalone_var, 0) - results.portfolio_var)] }) }), _jsx("td", { className: "px-3 py-2 text-right", children: "100.0%" })] })] })] }) }) })] }), _jsxs(Card, { className: "rounded-2xl shadow-sm", children: [_jsx(CardHeader, { children: _jsx(CardTitle, { className: "text-lg", children: "\uD83D\uDCC9 Correlation Matrix" }) }), _jsxs(CardContent, { children: [_jsx("div", { className: "overflow-auto", children: _jsxs("table", { className: "w-full text-xs", children: [_jsx("thead", { children: _jsxs("tr", { children: [_jsx("th", { className: "px-2 py-2 text-left font-semibold text-gray-700 sticky left-0 bg-white" }), results.correlation_matrix.asset_names.map((name, idx) => (_jsx("th", { className: "px-2 py-2 text-center font-semibold text-gray-700", children: name.length > 15 ? name.substring(0, 12) + '...' : name }, idx)))] }) }), _jsx("tbody", { children: results.correlation_matrix.matrix.map((row, i) => (_jsxs("tr", { className: "border-t", children: [_jsx("td", { className: "px-2 py-2 font-semibold text-gray-700 sticky left-0 bg-white", children: results.correlation_matrix.asset_names[i].length > 15
                                                            ? results.correlation_matrix.asset_names[i].substring(0, 12) + '...'
                                                            : results.correlation_matrix.asset_names[i] }), row.map((corr, j) => (_jsx("td", { className: "px-2 py-2 text-center", children: _jsx("span", { className: `inline-block px-2 py-1 rounded ${getCorrelationColor(corr)}`, children: formatNumber(corr, 2) }) }, j)))] }, i))) })] }) }), _jsxs("div", { className: "mt-3 flex items-center justify-center gap-4 text-xs text-gray-600", children: [_jsxs("div", { className: "flex items-center gap-1", children: [_jsx("div", { className: "w-4 h-4 bg-green-100 border border-green-300 rounded" }), _jsx("span", { children: "Negative (< -0.7)" })] }), _jsxs("div", { className: "flex items-center gap-1", children: [_jsx("div", { className: "w-4 h-4 bg-blue-100 border border-blue-300 rounded" }), _jsx("span", { children: "Weak negative" })] }), _jsxs("div", { className: "flex items-center gap-1", children: [_jsx("div", { className: "w-4 h-4 bg-gray-100 border border-gray-300 rounded" }), _jsx("span", { children: "Neutral" })] }), _jsxs("div", { className: "flex items-center gap-1", children: [_jsx("div", { className: "w-4 h-4 bg-orange-100 border border-orange-300 rounded" }), _jsx("span", { children: "Weak positive" })] }), _jsxs("div", { className: "flex items-center gap-1", children: [_jsx("div", { className: "w-4 h-4 bg-red-100 border border-red-300 rounded" }), _jsx("span", { children: "Strong (> 0.7)" })] })] })] })] })] }));
}
